<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Spatial_Audio_Framework: Spatial_Audio_Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Spatial_Audio_Framework
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Spatial_Audio_Framework </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A cross-platform Spatial Audio Framework (SAF) written in C. The framework includes functions for performing Vector-Base Amplitude Panning (VBAP), Spherical Array Processing, and Higher-order Ambisonics (HOA); to name a few.</p>
<p><img src="saf.png" alt="" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md29"></a>
Prerequisites</h1>
<p>The framework requires the following libraries:</p><ul>
<li>Any Library/Libraries conforming to the <a href="https://en.wikipedia.org/wiki/Basic_Linear_Algebra_Subprograms#Implementations">CBLAS</a> and <a href="https://en.wikipedia.org/wiki/LAPACK">LAPACK</a> standards</li>
<li>(Optional) <a href="https://www.unidata.ucar.edu/software/netcdf/">netCDF</a> for reading <a href="https://www.sofaconventions.org/mediawiki/index.php/SOFA_(Spatially_Oriented_Format_for_Acoustics)">SOFA</a> files</li>
</ul>
<p>The rationale for the former requirement is that the framework employs the use of CBLAS/LAPACK routines for tackling all of the linear algebra operations, which are used quite prolifically throughout the code. Therefore, a performance library, which conforms to the CBLAS/LAPACK standards, is required by most of the framework modules. In principle, any such library (or combination of libraries) may be employed for this task, and if you've worked with such libraries before, then you probably already know what to do. Although, using a custom Intel MKL library for this requirement is still generally recommended, as this is the approach used by the developers.</p>
<h1><a class="anchor" id="autotoc_md30"></a>
Available CBLAS/LAPACK options</h1>
<p>Define one of the following preprocessor definitions, which will dictate which library/libraries you should link to your project:</p>
<div class="fragment"><div class="line">SAF_USE_INTEL_MKL</div>
<div class="line">SAF_USE_OPEN_BLAS_AND_LAPACKE</div>
<div class="line">SAF_USE_ATLAS</div>
</div><!-- fragment --><ul>
<li>SAF_USE_INTEL_MKL - to use <a href="https://software.intel.com/en-us/articles/free-ipsxe-tools-and-libraries">Intel MKL</a>, or a **custom Intel MKL library** (recommended for x86_64/amd64).</li>
<li>SAF_USE_OPEN_BLAS_AND_LAPACKE - to use <a href="https://github.com/xianyi/OpenBLAS">OpenBLAS</a> and the LAPACKE interface (recommended for ARM)</li>
<li>SAF_USE_ATLAS - to use <a href="http://math-atlas.sourceforge.net/">ALTAS</a> which is not recommended, as some LAPACK functions are missing. However, if you don't mind loosing some SAF functionality then it may still be a good choice for your particular project.</li>
</ul>
<p><b>MacOSX users only</b>: If you do not define one of the above flags, then SAF will use <a href="https://developer.apple.com/documentation/accelerate">Apple Accelerate</a> for CBLAS/LAPACK and also vDSP for the FFT. However, note that Intel MKL is still the more recommended option, as it is usually faster than Accelerate.</p>
<h1><a class="anchor" id="autotoc_md31"></a>
Enable SOFA support (Optional)</h1>
<p>In order to use the built-in <a href="https://www.sofaconventions.org/mediawiki/index.php/SOFA_(Spatially_Oriented_Format_for_Acoustics)">SOFA</a> reader (<a class="el" href="saf__sofa__reader_8h.html" title="A simple sofa reader, which returns only the bare minimum.">framework/modules/saf_hrir/saf_sofa_reader.h</a>), your project must also link against the <a href="https://www.unidata.ucar.edu/software/netcdf/">netCDF</a> library (including its dependencies). For those already familar with building and linking this particular library, you know what to do. However, for convenience, suggested platform specfic instructions have been provided below.</p>
<p>Also, the following preprocessor definition is required: </p><div class="fragment"><div class="line">SAF_ENABLE_SOFA_READER</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md32"></a>
Windows (64-bit) users</h2>
<p>For convenience, the following statically built libraries are included in "dependencies/Win64/"; simply link your project against them:</p>
<div class="fragment"><div class="line">libszip.lib; libzlib.lib; libhdf5.lib; libhdf5_hl.lib; netcdf.lib;</div>
</div><!-- fragment --><p>And also add the following two directories to your project's header and library search paths, respectively:</p>
<div class="fragment"><div class="line">Spatial_Audio_Framework/dependencies/Win64/include</div>
<div class="line">Spatial_Audio_Framework/dependencies/Win64/lib</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md33"></a>
MacOSX users</h2>
<p>For convenience, the following statically built libraries are included in "dependencies/MacOSX/"; simply link your project against them:</p>
<div class="fragment"><div class="line">netcdf; hdf5; hdf5_hl; z; </div>
</div><!-- fragment --><p>And also add the following two directories to your project's header and library search paths, respectively:</p>
<div class="fragment"><div class="line">Spatial_Audio_Framework/dependencies/MacOSX/include</div>
<div class="line">Spatial_Audio_Framework/dependencies/MacOSX/lib</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md34"></a>
Linux (amd64) and Raspberry Pi (ARM) users</h2>
<p>For ubuntu based distros, you may install <a href="https://www.unidata.ucar.edu/software/netcdf/">netCDF</a> and its dependencies with these terminal commands:</p>
<div class="fragment"><div class="line">sudo apt-get install libhdf5-dev</div>
<div class="line">sudo apt-get install libnetcdf-dev libnetcdff-dev</div>
</div><!-- fragment --><p>Then simply add the following directory to the header search path:</p>
<div class="fragment"><div class="line">/usr/include  </div>
</div><!-- fragment --><p>And add this linker flag to your project (or wherever it was installed):</p>
<div class="fragment"><div class="line">-L/lib/x86_64-linux-gnu -lnetcdf</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md35"></a>
Using the framework</h1>
<p>Once a CBLAS/LAPACK flag is defined (see above), and the correct libraries are linked to your project, you can now add all of the files found in the "framework" folder to your project. (You may simply drag the folder into your IDE if you wish).</p>
<p>Then add the following directory to your header search paths:</p>
<div class="fragment"><div class="line">Spatial_Audio_Framework/framework/include </div>
</div><!-- fragment --><p>The framework's master include header is:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="saf_8h.html">saf.h</a>&quot;</span></div>
</div><!-- fragment --><p>Detailed instructions regarding how to use the functions offered by each of the framework's module, is provided in the main header file for the respective module (e.g. "/modules/saf_**sh**/saf_**sh**.h", or "/modules/saf_**vbap**/saf_**vbap**.h").</p>
<h2><a class="anchor" id="autotoc_md36"></a>
Examples</h2>
<p>Many examples have been included in the repository, which may also serve as a starting point for learning the framework:</p>
<ul>
<li><b>ambi_bin</b> - a binaural Ambisonic decoder with built-in rotator. It includes the following decoding approaches: least-squares (LS), spatial re-sampling (SPR), Time-alignment (TA) [1], Magnitude Least-Squares (MagLS) [2].</li>
<li><b>ambi_dec</b> - a frequency-dependent Ambisonic decoder. Including the following decoding approaches: sampling ambisonic decoder (SAD), AllRAD [3], Energy-Preserving decoder (EPAD) [4], Mode-Matching decoder (MMD).</li>
<li><b>ambi_drc</b> - a frequency-dependent dynamic range compressor (DRC) for Ambisonic signals, based on the design proposed in [5].</li>
<li><b>ambi_enc</b> - a simple Ambisonic encoder.</li>
<li><b>array2sh</b> - converts microphone array signals into spherical harmonic signals (aka Ambisonic signals), based on theoretical descriptions [6,7]. More details in [8].</li>
<li><b>beamformer</b> - a beamforming example with several different beamforming options.</li>
<li><b>binauraliser</b> - convolves input audio with interpolated HRTFs, which can be optionally loaded from a SOFA file.</li>
<li><b>dirass</b> - a sound-field visualiser based on re-assigning the energy of beamformers. This re-assignment is based on the DoA estimates extracted from spatially-localised active-intensity vectors, which are biased towards each beamformer direction [9].</li>
<li><b>panner</b> - a frequency-dependent VBAP panner [10], which allows for more consistent source loudness as a function of the room [11].</li>
<li><b>matrixconv</b> - a basic matrix convolver with an optional partitioned convolution mode.</li>
<li><b>multiconv</b> - a basic multi-channel convolver with an optional partitioned convolution mode.</li>
<li><b>powermap</b> - sound-field visualiser using beamformers (PWD, MVDR) or sub-space methods (MUSIC).</li>
<li><b>rotator</b> - rotates spherical harmonic signals (aka Ambisonic signals) given yaw-pitch-roll angles [12].</li>
<li><b>sldoa</b> - a sound-field visualiser based on directly depicting the DoA estimates extracted from multiple spatially-localised active-intensity vectors; as proposed in [8].</li>
<li><b>upmix</b> - a (soon to be) collection of upmixing algorithms (currently only stereo to 5.x upmixing).</li>
</ul>
<p>Many of these examples have also been integrated into VST audio plug-ins using the JUCE framework and can be found <a href="http://research.spa.aalto.fi/projects/sparta_vsts/">here</a>.</p>
<h1><a class="anchor" id="autotoc_md37"></a>
Developers</h1>
<ul>
<li><b>Leo McCormack</b> - C programmer and algorithm design (contact: <a href="#" onclick="location.href='mai'+'lto:'+'leo'+'.m'+'cco'+'rm'+'ack'+'@a'+'alt'+'o.'+'fi'; return false;">leo.m<span style="display: none;">.nosp@m.</span>ccor<span style="display: none;">.nosp@m.</span>mack@<span style="display: none;">.nosp@m.</span>aalt<span style="display: none;">.nosp@m.</span>o.fi</a>)</li>
<li><b>Symeon Delikaris-Manias</b> - algorithm design</li>
<li><b>Archontis Politis</b> - algorithm design</li>
</ul>
<h1><a class="anchor" id="autotoc_md38"></a>
License</h1>
<p>This framework is provided under the <a href="https://choosealicense.com/licenses/isc/">ISC license</a>. However, it also includes a modified version of the <a href="https://github.com/jvilkamo/afSTFT">'alias-free STFT'</a> implementation by Juha Vilkamo (MIT license); <a href="https://github.com/mborgerding/kissfft">kissFFT</a> (BSD 3-clause license) by Mark Borgerding; and the <a href="https://github.com/leomccormack/convhull_3d">'convhull_3d'</a> 3-D Convex Hull implementation by Leo McCormack (MIT license).</p>
<h1><a class="anchor" id="autotoc_md39"></a>
References</h1>
<p>[1] Zaunschirm M, Schörkhuber C, Höldrich R. <b>Binaural rendering of Ambisonic signals by head-related impulse response time alignment and a diffuseness constraint</b>. <br  />
 The Journal of the Acoustical Society of America. 2018 Jun 19;143(6):3616-27.</p>
<p>[2] Schörkhuber C, Zaunschirm M, Höldrich R. <b>Binaural Rendering of Ambisonic Signals via Magnitude Least Squares</b>. <br  />
 InProceedings of the DAGA 2018 (Vol. 44, pp. 339-342).</p>
<p>[3] Zotter F, Frank M. <b>All-round ambisonic panning and decoding</b>. <br  />
 Journal of the audio engineering society. 2012 Nov 26;60(10):807-20.</p>
<p>[4] Zotter F, Pomberger H, Noisternig M. <b>Energy-preserving ambisonic decoding</b>. <br  />
 Acta Acustica united with Acustica. 2012 Jan 1;98(1):37-47.</p>
<p>[5] McCormack L, Välimäki V. <b>FFT-based Dynamic Range Compression</b>. <br  />
 In Proceedings of the 14th Sound and Music Computing Conference, July 5&ndash;8, Espoo, Finland, At Espoo, Finland 2017</p>
<p>[6] Williams EG. <b>Fourier acoustics: sound radiation and nearfield acoustical holography</b>. <br  />
 Elsevier; 1999 Jun 10.</p>
<p>[7] Rafaely B. <b>Fundamentals of spherical array processing</b>. <br  />
 Berlin: Springer; 2015 Feb 18.</p>
<p>[8] McCormack L, Delikaris-Manias S, Farina A, Pinardi D, Pulkki V. <b>Real-Time Conversion of Sensor Array Signals into Spherical Harmonic Signals with Applications to Spatially Localized Sub-Band Sound-Field Analysis</b>. <br  />
 In Audio Engineering Society Convention 144 2018 May 14. Audio Engineering Society.</p>
<p>[9] McCormack L, Politis A, Pulkki V. <b>Sharpening of Angular Spectra Based on a Directional Re-assignment Approach for Ambisonic Sound-field Visualisation</b>. <br  />
 In ICASSP 2019-2019 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP) 2019 Apr 17 (pp. 576-580). IEEE.</p>
<p>[10] Pulkki V. <b>Virtual sound source positioning using vector base amplitude panning</b>. <br  />
 Journal of the audio engineering society. 1997 Jun 1;45(6):456-66.</p>
<p>[11] Laitinen MV, Vilkamo J, Jussila K, Politis A, Pulkki V. <b>Gain normalization in amplitude panning as a function of frequency and room reverberance</b>. <br  />
 In Audio Engineering Society Conference: 55th International Conference: Spatial Audio 2014 Aug 26. Audio Engineering Society.</p>
<p>[12] Ivanic J, Ruedenberg K. <b>Rotation Matrices for Real Spherical Harmonics. Direct Determination by Recursion</b>. <br  />
 The Journal of Physical Chemistry A. 1998 Nov 5;102(45):9099-100. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="asaf_8h_html"><div class="ttname"><a href="saf_8h.html">saf.h</a></div><div class="ttdoc">Main include header for the spatial audio framework.</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Mar 4 2020 13:32:58 for Spatial_Audio_Framework by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
